<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AR Direction Plugin - Demo</title>
    <script src="ar-direction.js"></script>
    <script src="ar-navigation-ui.js"></script>
</head>
<body>
<script>
    // ── Demo Segmentleri ──
    const segments = [
        { x1: 1378.973, y1: 1468.116, x2: 1406.603, y2: 1452.788 },
        { x1: 1406.603, y1: 1452.788, x2: 1450.234, y2: 1420.567 },
        { x1: 1450.234, y1: 1420.567, x2: 1520.456, y2: 1380.123 },
        { x1: 1520.456, y1: 1380.123, x2: 1600.789, y2: 1350.456 },
        { x1: 1600.789, y1: 1350.456, x2: 1680.123, y2: 1320.789 }
    ];

    // ── Hesapla & Başlat ──
    const dir = new ARDirectionCalculator({ segments, maxSegments: 5 }).calculate();

    if (!dir) {
        document.body.textContent = 'Yön hesaplanamadı';
    } else {
        let nav = null;

        function startAR() {
            if (nav) {
                nav.setTargetAngle(dir.compassAngle);
            } else {
                nav = new ARNavigationUI({
                    targetAngle: dir.compassAngle,
                    tolerance: 10,
                    progressDuration: 3,
                    showPopup: true,
                    popupMessage: 'Hedefe ulaştınız!',
                    popupButtonText: 'Tamam',
                    showDebugPanel: true,
                    arrowImages: {
                        left: './assets/left_arrow.png',
                        right: './assets/right_arrow.png',
                        forward: './assets/ileri.png',
                        forwardPerspective: './assets/ileri_perspective.png'
                    },
                    popupImage: './assets/check.png',
                    loadingImage: './assets/location.gif',
                    onPopupDismiss: () => startAR(),
                    onError: (e) => console.error('AR Hata:', e)
                });
            }
            nav.start();
        }

        startAR();
    }
</script>
</body>
</html>
